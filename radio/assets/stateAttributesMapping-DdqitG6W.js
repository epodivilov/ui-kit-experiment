import{i as e,l as t}from"./iframe-DNla4mPf.js";import{t as n}from"./react-dom-BPVL9wN0.js";import{d as r,g as i,h as a,i as o,p as s,t as c,u as l}from"./useLatestRef-CqQz6U7_.js";const u={clip:`rect(0 0 0 0)`,overflow:`hidden`,whiteSpace:`nowrap`,position:`fixed`,top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1};function d(){return typeof window<`u`}function f(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function p(e){return d()?e instanceof HTMLElement||e instanceof f(e).HTMLElement:!1}function m(e){return!d()||typeof ShadowRoot>`u`?!1:e instanceof ShadowRoot||e instanceof f(e).ShadowRoot}var h=t(e());const g=h.createContext(void 0);function _(e=!1){let t=h.useContext(g);if(t===void 0&&!e)throw Error(`Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.`);return t}function v(e){let{focusableWhenDisabled:t,disabled:n,composite:r=!1,tabIndex:i=0,isNativeButton:a}=e,o=r&&t!==!1,s=r&&t===!1;return{props:h.useMemo(()=>{let e={onKeyDown(e){n&&t&&e.key!==`Tab`&&e.preventDefault()}};return r||(e.tabIndex=i,!a&&n&&(e.tabIndex=t?i:-1)),(a&&(t||o)||!a&&n)&&(e[`aria-disabled`]=n),a&&(!t||s)&&(e.disabled=n),e},[r,n,t,o,s,a,i])}}function y(e={}){let{disabled:t=!1,focusableWhenDisabled:n,tabIndex:i=0,native:o=!0}=e,c=h.useRef(null),u=_(!0)!==void 0,d=a(()=>{let e=c.current;return!!(e?.tagName===`A`&&e?.href)}),{props:f}=v({focusableWhenDisabled:n,disabled:t,composite:u,tabIndex:i,isNativeButton:o}),p=h.useCallback(()=>{let e=c.current;b(e)&&u&&t&&f.disabled===void 0&&e.disabled&&(e.disabled=!1)},[t,f.disabled,u]);s(p,[p]);let m=h.useCallback((e={})=>{let{onClick:n,onMouseDown:i,onKeyUp:a,onKeyDown:s,onPointerDown:c,...u}=e;return r({type:o?`button`:void 0,onClick(e){if(t){e.preventDefault();return}n?.(e)},onMouseDown(e){t||i?.(e)},onKeyDown(e){if(t||(l(e),s?.(e)),e.baseUIHandlerPrevented)return;let r=e.target===e.currentTarget&&!o&&!d()&&!t,i=e.key===`Enter`,a=e.key===` `;r&&((a||i)&&e.preventDefault(),i&&n?.(e))},onKeyUp(e){t||(l(e),a?.(e)),!e.baseUIHandlerPrevented&&e.target===e.currentTarget&&!o&&!t&&e.key===` `&&n?.(e)},onPointerDown(e){if(t){e.preventDefault();return}c?.(e)}},o?void 0:{role:`button`},f,u)},[t,f,o,d]),g=a(e=>{c.current=e,p()});return{getButtonProps:m,buttonRef:g}}function b(e){return p(e)&&e.tagName===`BUTTON`}var x=null;globalThis.requestAnimationFrame;var S=new class{callbacks=(()=>[])();callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=e=>{this.isScheduled=!1;let t=this.callbacks,n=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,n>0)for(let n=0;n<t.length;n+=1)t[n]?.(e)};request(e){let t=this.nextId;return this.nextId+=1,this.callbacks.push(e),this.callbacksCount+=1,this.isScheduled||=(requestAnimationFrame(this.tick),!0),t}cancel(e){let t=e-this.startId;t<0||t>=this.callbacks.length||(this.callbacks[t]=null,--this.callbacksCount)}},C=class e{static create(){return new e}static request(e){return S.request(e)}static cancel(e){return S.cancel(e)}currentId=(()=>x)();request(e){this.cancel(),this.currentId=S.request(()=>{this.currentId=x,e()})}cancel=()=>{this.currentId!==x&&(S.cancel(this.currentId),this.currentId=x)};disposeEffect=()=>this.cancel};function w(){let e=i(C.create).current;return o(e.disposeEffect),e}var T=t(n());function E(e,t=!1){let n=w();return a((r,i=null)=>{if(n.cancel(),e==null)return;let a;if(`current`in e){if(e.current==null)return;a=e.current}else a=e;typeof a.getAnimations!=`function`||globalThis.BASE_UI_ANIMATIONS_DISABLED?r():n.request(()=>{function e(){a&&Promise.allSettled(a.getAnimations().map(e=>e.finished)).then(()=>{i!=null&&i.aborted||T.flushSync(r)})}t?n.request(e):e()})})}function D(e){let{enabled:t=!0,open:n,ref:r,onComplete:i}=e,o=c(n),s=a(i),l=E(r,n);h.useEffect(()=>{t&&l(()=>{n===o.current&&s()})},[t,n,s,l,o])}let O=function(e){return e.startingStyle=`data-starting-style`,e.endingStyle=`data-ending-style`,e}({});var k={[O.startingStyle]:``},A={[O.endingStyle]:``};const j={transitionStatus(e){return e===`starting`?k:e===`ending`?A:null}};export{g as a,p as c,y as i,m as l,D as n,_ as o,C as r,f as s,j as t,u};