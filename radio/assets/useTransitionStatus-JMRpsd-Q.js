import{i as e,l as t}from"./iframe-DNla4mPf.js";import{t as n}from"./react-dom-BPVL9wN0.js";import{p as r}from"./useLatestRef-CqQz6U7_.js";import{r as i}from"./stateAttributesMapping-DdqitG6W.js";var a=t(e()),o=t(n());function s(e,t=!1,n=!1){let[s,c]=a.useState(e&&t?`idle`:void 0),[l,u]=a.useState(e);return e&&!l&&(u(!0),c(`starting`)),!e&&l&&s!==`ending`&&!n&&c(`ending`),!e&&!l&&s===`ending`&&c(void 0),r(()=>{if(!e&&l&&s!==`ending`&&n){let e=i.request(()=>{c(`ending`)});return()=>{i.cancel(e)}}},[e,l,s,n]),r(()=>{if(!e||t)return;let n=i.request(()=>{o.flushSync(()=>{c(void 0)})});return()=>{i.cancel(n)}},[t,e]),r(()=>{if(!e||!t)return;e&&l&&s!==`idle`&&c(`starting`);let n=i.request(()=>{c(`idle`)});return()=>{i.cancel(n)}},[t,e,l,c,s]),a.useMemo(()=>({mounted:l,setMounted:u,transitionStatus:s}),[l,s])}export{s as t};